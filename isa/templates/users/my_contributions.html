{% extends "main/layout.html" %} {% block content %}
<div class="container my-contrib-container">
  <header class="mc-header">
    <h1 class="mc-title">{{ gettext('My Contributions') }} - {{ username }}</h1>
    <p class="mc-subtitle">
      {{ gettext('Overview of your recent contributions and activity') }}
    </p>
  </header>

  <!-- Summary cards -->
  <section class="mc-summary-cards" aria-label="Summary">
    <div class="mc-cards-row">
      <div class="mc-card" id="card-total">
        <div class="mc-card-label">{{ gettext('Total contributions') }}</div>
        <div class="mc-card-value" id="total-contributions">—</div>
      </div>
      <div class="mc-card" id="card-campaigns">
        <div class="mc-card-label">{{ gettext('Campaigns participated') }}</div>
        <div class="mc-card-value" id="campaigns-count">—</div>
      </div>
      <div class="mc-card" id="card-first">
        <div class="mc-card-label">{{ gettext('First contribution') }}</div>
        <div class="mc-card-value" id="first-contribution">—</div>
      </div>
      <div class="mc-card" id="card-recent">
        <div class="mc-card-label">{{ gettext('Most recent') }}</div>
        <div class="mc-card-value" id="recent-contribution">—</div>
      </div>
    </div>
  </section>

  <div class="mc-main-grid">
    <!-- Filters panel -->
    <aside class="mc-filters" aria-label="Filters">
      <h2 class="mc-section-title">{{ gettext('Filters') }}</h2>

      <div class="mc-filter-row">
        <label for="filter-campaign">{{ gettext('Campaign') }}</label>
        <select
          id="filter-campaign"
          class="form-control mc-filter-input"
          aria-label="Campaign filter"
        ></select>
      </div>

      <div class="mc-filter-row">
        <label for="filter-date-from">{{ gettext('From') }}</label>
        <input
          id="filter-date-from"
          type="date"
          class="form-control mc-filter-input"
        />
      </div>
      <div class="mc-filter-row">
        <label for="filter-date-to">{{ gettext('To') }}</label>
        <input
          id="filter-date-to"
          type="date"
          class="form-control mc-filter-input"
        />
      </div>

      <div class="mc-filter-row">
        <label for="filter-edit-type">{{ gettext('Edit type') }}</label>
        <select id="filter-edit-type" class="form-control mc-filter-input">
          <option value="">{{ gettext('Any') }}</option>
          <option value="caption">{{ gettext('captions') }}</option>
          <option value="depicts">{{ gettext('depicts') }}</option>
        </select>
      </div>

      <div class="mc-filter-row">
        <label for="filter-lang">{{ gettext('Caption language') }}</label>
        <select id="filter-lang" class="form-control mc-filter-input">
          <option value="">{{ gettext('Any') }}</option>
        </select>
      </div>

      <div class="mc-filter-row">
        <label for="filter-search">{{ gettext('Search') }}</label>
        <input
          id="filter-search"
          class="form-control mc-filter-input"
          placeholder="{{ gettext('File name or item') }}"
        />
      </div>

      <div class="mc-filter-actions">
        <button id="btn-reset" class="btn btn-secondary btn-sm">
          {{ gettext('Reset') }}
        </button>
      </div>
    </aside>

    <!-- Main content -->
    <section class="mc-content">
      <!-- GitHub-style contributions grid -->
      <div class="mc-contrib-grid-card">
        <div class="contrib-grid-header">
          <div class="contrib-stats">
            <div id="contrib-total-display" class="contrib-total">
              — contributions
            </div>
            <div class="contrib-period">in the last year</div>
          </div>
          <div class="contrib-grid-nav">
            <button
              id="prev-year"
              class="btn btn-sm btn-outline-secondary"
              aria-label="Previous year"
            >
              &larr;
            </button>
            <span id="current-year-display" class="year-display">2024</span>
            <button
              id="next-year"
              class="btn btn-sm btn-outline-secondary"
              aria-label="Next year"
            >
              &rarr;
            </button>
            <button id="reset-view" class="btn btn-sm btn-outline-secondary">
              {{ gettext('Today') }}
            </button>
          </div>
        </div>

        <div class="contrib-grid-wrapper">
          <!-- Tooltip container -->
          <div
            id="contrib-tooltip"
            class="contrib-tooltip"
            role="tooltip"
          ></div>

          <!-- Month labels (top) -->
          <div id="month-labels" class="month-labels"></div>

          <div style="display: flex">
            <!-- Day labels (left side) -->
            <div id="day-labels" class="day-labels"></div>

            <!-- Year labels (left side) -->
            <div id="year-labels" class="year-labels"></div>

            <!-- Main grid -->
            <div id="week-columns" class="week-columns"></div>
          </div>
        </div>

        <div class="contrib-grid-footer">
          <div class="legend-section">
            <!-- <span class="legend-link">Contribution settings</span> -->
          </div>
          <!-- <div class="legend-section">
            <a href="#" class="learn-link">Learn how we count contributions</a>
          </div> -->
          <div class="legend-section">
            <!-- <span class="legend-label">{{ gettext('Less') }}</span> -->
            <div class="legend-colors">
              <div class="legend-color level-0" title="0 contributions"></div>
              <div class="legend-color level-1" title="1-2 contributions"></div>
              <div class="legend-color level-2" title="3-4 contributions"></div>
              <div class="legend-color level-3" title="5-9 contributions"></div>
              <div class="legend-color level-4" title="10+ contributions"></div>
            </div>
            <!-- <span class="legend-label">{{ gettext('More') }}</span> -->
          </div>
        </div>
      </div>

      <div class="mc-table-card">
        <h3 class="mc-section-title">{{ gettext('Contributions') }}</h3>

        <div id="mc-state" class="mc-state"></div>

        <table
          class="table table-striped mc-table"
          id="contrib-table"
          aria-live="polite"
        >
          <thead>
            <tr>
              <th data-sort="date">{{ gettext('Date') }}</th>
              <th data-sort="campaign">{{ gettext('Campaign') }}</th>
              <th data-sort="file">{{ gettext('File') }}</th>
              <th data-sort="edit_type">{{ gettext('Edit type') }}</th>
              <th data-sort="country">{{ gettext('Country') }}</th>
              <th data-sort="lang">{{ gettext('Caption language') }}</th>
            </tr>
          </thead>
          <tbody id="contrib-tbody"></tbody>
        </table>

        <nav aria-label="Table pagination">
          <ul class="pagination" id="mc-pagination"></ul>
        </nav>
      </div>

      <div class="mc-charts">
        <div class="mc-chart-card">
          <h3 class="mc-chart-title">
            {{ gettext('Contributions over time') }}
          </h3>
          <canvas
            id="chart-time"
            aria-label="Contributions over time"
            role="img"
          ></canvas>
        </div>

        <div class="mc-chart-row">
          <div class="mc-chart-card small">
            <h3 class="mc-chart-title">{{ gettext('By campaign') }}</h3>
            <canvas
              id="chart-campaign"
              aria-label="Contributions by campaign"
              role="img"
            ></canvas>
          </div>
          <div class="mc-chart-card small">
            <h3 class="mc-chart-title">{{ gettext('By edit type') }}</h3>
            <canvas
              id="chart-edit-type"
              aria-label="Contributions by edit type"
              role="img"
            ></canvas>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
{% endblock %} {% block scripts %}
<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/my_contributions.js') }}"></script>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/my_contributions.css') }}"
/>
{% endblock %}
